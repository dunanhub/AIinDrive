# üöó –°–∏—Å—Ç–µ–º–∞ –ú–Ω–æ–≥–æ–∫–ª–∞—Å—Å–æ–≤–æ–≥–æ –ê–Ω–∞–ª–∏–∑–∞ –ê–≤—Ç–æ–º–æ–±–∏–ª–µ–π v3.0

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîß –ê–Ω–∞–ª–∏–∑ –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (3 –∫–ª–∞—Å—Å–∞)
- **–ù–µ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–æ–±–∏–ª—å –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- **–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è** - –º–µ–ª–∫–∏–µ —Ü–∞—Ä–∞–ø–∏–Ω—ã, –ø–æ—Ç–µ—Ä—Ç–æ—Å—Ç–∏
- **–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è** - —Å–µ—Ä—å–µ–∑–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ–º–æ–Ω—Ç–∞

### üßΩ –ê–Ω–∞–ª–∏–∑ –ß–∏—Å—Ç–æ—Ç—ã
- **–ß–∏—Å—Ç—ã–π** - –∞–≤—Ç–æ–º–æ–±–∏–ª—å –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- **–°–ª–µ–≥–∫–∞ –≥—Ä—è–∑–Ω—ã–π** - –¥–æ–ø—É—Å—Ç–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è
- **–ì—Ä—è–∑–Ω—ã–π** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–π–∫–∞

### üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –û—Ü–µ–Ω–∫–∞
- –ß–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (0-10)
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ car_state/                          # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ multiclass_damage_model.py      # –ú–æ–¥–µ–ª—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (ResNet50)
‚îÇ   ‚îú‚îÄ‚îÄ train_multiclass_damage.py      # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dirt_analyzer.py               # –ê–Ω–∞–ª–∏–∑ —á–∏—Å—Ç–æ—Ç—ã (CV)
‚îÇ   ‚îú‚îÄ‚îÄ multiclass_analyzer.py         # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ multiclass_fastapi_server.py   # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ data/                              # –î–∞—Ç–∞—Å–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Rust and Scrach.v1i.multiclass/
‚îÇ   ‚îî‚îÄ‚îÄ Car Scratch and Dent.v5i.multiclass/
‚îú‚îÄ‚îÄ artifacts/                         # –û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ logs/                             # –õ–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ train_real_data.py                # –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ test_multiclass_api.py            # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
‚îî‚îÄ‚îÄ requirements.txt                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –î–∞–Ω–Ω—ã—Ö

–ü–æ–º–µ—Å—Ç–∏—Ç–µ –¥–∞—Ç–∞—Å–µ—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```
data/
‚îú‚îÄ‚îÄ Rust and Scrach.v1i.multiclass/
‚îÇ   ‚îî‚îÄ‚îÄ train/
‚îÇ       ‚îú‚îÄ‚îÄ no_damage/
‚îÇ       ‚îú‚îÄ‚îÄ minor_damage/
‚îÇ       ‚îî‚îÄ‚îÄ major_damage/
‚îî‚îÄ‚îÄ Car Scratch and Dent.v5i.multiclass/
    ‚îî‚îÄ‚îÄ train/
        ‚îú‚îÄ‚îÄ no_damage/
        ‚îú‚îÄ‚îÄ minor_damage/
        ‚îî‚îÄ‚îÄ major_damage/
```

### 3. –û–±—É—á–µ–Ω–∏–µ –ú–æ–¥–µ–ª–∏

```bash
python train_real_data.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
- üîß –ù–∞—Å—Ç—Ä–æ–∏—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ (CUDA/CPU)
- üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç –æ–±—É—á–µ–Ω–∏–µ –º–Ω–æ–≥–æ–∫–ª–∞—Å—Å–æ–≤–æ–π –º–æ–¥–µ–ª–∏
- üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç –æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –≤ `artifacts/`
–∞—Ü–∏—è


### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê–Ω–∞–ª–∏–∑ (Python)

```python
import requests

with open('car_image.jpg', 'rb') as f:
    files = {'file': f}
    data = {'car_name': 'BMW X5'}
    response = requests.post(
        'http://localhost:8000/analyze/comprehensive',
        files=files, 
        data=data
    )

result = response.json()
print(f"–°—Ç–∞—Ç—É—Å: {result['overall_status']['status']}")
print(f"–û—Ç—á–µ—Ç: {result['comprehensive_report']}")
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ú–æ–¥–µ–ª—å –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: ResNet50 + Enhanced Classifier
- **–ö–ª–∞—Å—Å—ã**: no_damage, minor_damage, major_damage
- **–§—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å**: Focal Loss (–¥–ª—è –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞ –∫–ª–∞—Å—Å–æ–≤)
- **–°—ç–º–ø–ª–∏–Ω–≥**: WeightedRandomSampler
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: ROC-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏

### –ê–Ω–∞–ª–∏–∑ –ß–∏—Å—Ç–æ—Ç—ã
- **–ú–µ—Ç–æ–¥**: Computer Vision —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å, —à—É–º, –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å
- **–ü–æ—Ä–æ–≥–∏**: clean < 0.35, slightly_dirty < 0.60, dirty ‚â• 0.60

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **GPU**: CUDA (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
- **CPU**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- **–ü–∞–º—è—Ç—å**: ~2GB –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, ~500MB –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- **–°–∫–æ—Ä–æ—Å—Ç—å**: ~1-3 —Å–µ–∫ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –û—Ç–≤–µ—Ç–∞ API

### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê–Ω–∞–ª–∏–∑

```json
{
  "car_name": "BMW X5",
  "damage_analysis": {
    "status": "minor_damage",
    "description": "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è",
    "severity": "low",
    "confidence": 0.87,
    "damage_probability": 0.75,
    "class_probabilities": {
      "no_damage": 0.25,
      "minor_damage": 0.60,
      "major_damage": 0.15
    }
  },
  "cleanliness_analysis": {
    "status": "slightly_dirty",
    "level": "acceptable",
    "description": "–ê–≤—Ç–æ–º–æ–±–∏–ª—å —Å–ª–µ–≥–∫–∞ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω",
    "recommendation": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ª–µ–≥–∫–∞—è –º–æ–π–∫–∞",
    "dirt_score": 0.45,
    "score_percentage": 45
  },
  "comprehensive_report": "–î–µ—Ç–∞–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–π –æ—Ç—á–µ—Ç...",
  "recommendations": [
    "–û—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è",
    "–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –º–æ–π–∫—É",
    "–ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"
  ],
  "overall_status": {
    "status": "attention_needed",
    "description": "–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è",
    "color": "yellow",
    "priority": 2
  },
  "technical_summary": {
    "processing_time": 1.23,
    "model_version": "3.0.0",
    "confidence_threshold": 0.5
  }
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ù–æ–≤–æ–π –°–∏—Å—Ç–µ–º—ã

### ‚úÖ –ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å v2.0
- **F1-score**: –£–ª—É—á—à–µ–Ω —Å 0.14 –¥–æ >0.85
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –£–ø—Ä–æ—â–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è)
- **–ö–ª–∞—Å—Å—ã**: 3 —á–µ—Ç–∫–∏—Ö –∫–ª–∞—Å—Å–∞ –≤–º–µ—Å—Ç–æ 5 —Ä–∞–∑–º—ã—Ç—ã—Ö
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: ROC-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
- **–ß–∏—Å—Ç–æ—Ç–∞**: –û—Ç–¥–µ–ª—å–Ω—ã–π CV-–∞–Ω–∞–ª–∏–∑

### üîÑ –ö–ª—é—á–µ–≤—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –û—Ç–∫–∞–∑ –æ—Ç dual-head –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –§–æ–∫—É—Å –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è CV-—ç–≤—Ä–∏—Å—Ç–∏–∫ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã
- –ß–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω—ã–π –≤—ã–≤–æ–¥
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤

## üêõ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
netstat -an | findstr :8000
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
ls artifacts/multiclass_damage_model.pth

# –ü–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å
python train_real_data.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö
- –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö –æ–±—É—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∫–ª–∞—Å—Å–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –û–±—É—á–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `logs/`
- –°–æ–¥–µ—Ä–∂–∞—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ —ç–ø–æ—Ö–∞–º
- –í–∫–ª—é—á–∞—é—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## ü§ù –†–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω—ã v3.1
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CV-—ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã
- [ ] –ê–Ω—Å–∞–º–±–ª—å –º–æ–¥–µ–ª–µ–π –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- [ ] –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∫–ª–∞–¥ –≤ –ü—Ä–æ–µ–∫—Ç
1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª

**üéâ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ç–æ—á–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π!**
